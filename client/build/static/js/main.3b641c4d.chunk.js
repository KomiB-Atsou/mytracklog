(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{124:function(e,t,a){e.exports=a(159)},132:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),c=a.n(o),l=a(51),s=a(55),i=a(95),u=a(45),d=a(14),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH":return localStorage.setItem("profile",JSON.stringify(Object(d.a)({},null===t||void 0===t?void 0:t.data))),Object(d.a)(Object(d.a)({},e),{},{authData:t.data,loading:!1,errors:null});case"LOGOUT":return localStorage.clear(),Object(d.a)(Object(d.a)({},e),{},{authData:null,loading:!1,errors:null});default:return e}},f=Object(s.b)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!0});case"END_LOADING":return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1});case"FETCH_ALL":return Object(d.a)(Object(d.a)({},e),{},{posts:t.payload.data,currentPage:t.payload.currentPage,numberOfPages:t.payload.numberOfPages});case"FETCH_BY_SEARCH":case"FETCH_BY_CREATOR":return Object(d.a)(Object(d.a)({},e),{},{posts:t.payload.data});case"FETCH_POST":return Object(d.a)(Object(d.a)({},e),{},{post:t.payload.post});case"LIKE":return Object(d.a)(Object(d.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"COMMENT":return Object(d.a)(Object(d.a)({},e),{},{posts:e.posts.map((function(e){return e._id==+t.payload._id?t.payload:e}))});case"CREATE":return Object(d.a)(Object(d.a)({},e),{},{posts:[].concat(Object(u.a)(e.posts),[t.payload])});case"UPDATE":return Object(d.a)(Object(d.a)({},e),{},{posts:e.posts.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"DELETE":return Object(d.a)(Object(d.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.payload}))});default:return e}},auth:m}),p=(a(132),a(56)),g=a(21),b=a(8),h=a(96),v=a(203),E=a(161),y=a(205),O=a(97),j=a(25),w=a(199),x=a(202),k=Object(w.a)((function(e){return{appBar:Object(j.a)({borderRadius:15,margin:"30px 0",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"10px 50px"},e.breakpoints.down("sm"),{flexDirection:"column"}),heading:{color:e.palette.primary.main,textDecoration:"none",fontSize:"2em",fontWeight:300},image:{marginLeft:"10px",marginTop:"5px"},toolbar:Object(j.a)({display:"flex",justifyContent:"flex-end",width:"400px"},e.breakpoints.down("sm"),{width:"auto"}),profile:Object(j.a)({display:"flex",justifyContent:"space-between",width:"400px",alignItems:"center"},e.breakpoints.down("sm"),{width:"auto",marginTop:20,justifyContent:"center"}),logout:{marginLeft:"20px"},userName:{display:"flex",alignItems:"center",textAlign:"center"},brandContainer:{display:"flex",alignItems:"center"},purple:{color:e.palette.getContrastText(x.a[500]),backgroundColor:x.a[500]}}}));function C(e){var t=Object(n.useState)(JSON.parse(localStorage.getItem("profile"))),a=Object(b.a)(t,2),o=a[0],c=a[1],s=Object(l.b)(),i=Object(g.h)(),u=Object(g.g)(),d=k();return Object(n.useEffect)((function(){var e=null===o||void 0===o?void 0:o.token;e&&(1e3*Object(O.a)(e).exp<(new Date).getTime()&&(s({type:"LOGOUT"}),u.push("/login"),c(null)));c(JSON.parse(localStorage.getItem("profile")))}),[i]),r.a.createElement("nav",{className:"navbar navbar-expand-xs navbar-expand-sm navbar-expand-md navbar-light bg-light",style:{height:"26px"}},r.a.createElement("a",{className:"navbar-brand text-white",href:"/"},r.a.createElement("i",{className:"fas fa-clipboard-check",style:{fontSize:"26px",marginRight:"10px"}}),h.appTitle),r.a.createElement(v.a,{className:d.toolbar},(null===o||void 0===o?void 0:o.result)?r.a.createElement("div",{className:d.profile},r.a.createElement(E.a,{className:d.userName,variant:"h6"},null===o||void 0===o?void 0:o.result.name)):r.a.createElement(y.a,{component:p.b,to:"/login",variant:"contained",color:"primary"},"Sign In")))}var N=a(7),D=a.n(N),S=a(78),T=(a(134),a(112)),Y=a(10),M=a.n(Y),I=a(16),A=a(67),_=a(27),B=a.n(_),L={api:"https://mytracklog.moozistudio.com/api/"};console.log("config :",L);var F=function e(){Object(A.a)(this,e)};F.getAll=function(){var e=Object(I.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={data:null,error:null},e.next=3,B.a.post("".concat(L.api,"/categories/all"),{keyword:t}).then((function(e){200===e.status&&(a.data=e.data)})).catch((function(e){a.error=e.response.data}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F.getAllFlat=function(){var e=Object(I.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={data:null,error:null},e.next=3,B.a.post("".concat(L.api,"/categories/all-flat"),{keyword:t}).then((function(e){console.log(e),200===e.status&&(a.data=e.data)})).catch((function(e){a.error=e.response.data}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F.add=function(){var e=Object(I.a)(M.a.mark((function e(t,a){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:null,error:null},r={label:t,parentCategoryId:a,dateCreated:D()().format(),dateUpdated:D()().format()},e.next=4,B.a.post("".concat(L.api,"/categories"),r).then((function(e){200===e.status&&(n.data=e.data)})).catch((function(e){n.error=e.response.data}));case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),F.update=function(){var e=Object(I.a)(M.a.mark((function e(t,a,n){var r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={data:null,error:null},o={label:a,parentCategoryId:n,dateUpdated:D()().format()},e.next=4,B.a.post("".concat(L.api,"/categories/").concat(t),o).then((function(e){console.log("passed : ",e),200===e.status&&(r.data=e.data)})).catch((function(e){console.log("error : ",e),r.error=e.response.data}));case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),F.getPath=function(){var e=Object(I.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={data:null,error:null},e.next=3,B.a.get("".concat(L.api,"/categories/").concat(t)).then((function(e){200===e.status&&(a.data=e.data)})).catch((function(e){a.error=e.response.data}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F.delete=function(){var e=Object(I.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={data:null,error:null},e.next=3,B.a.delete("".concat(L.api,"/categories/").concat(t)).then((function(e){200===e.status&&(a.data=e.data)})).catch((function(e){a.error=e.response.data}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F.getDuration=function(){var e=Object(I.a)(M.a.mark((function e(t,a,n){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={data:null,error:null},e.next=3,B.a.post("".concat(L.api,"/categories/totalDuration"),{categoryId:t,beginDate:a,endDate:n}).then((function(e){200===e.status&&(r.data=e.data)})).catch((function(e){r.error=e.response.data}));case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();var H=a(17),P=a.n(H),U=function(e,t,a){P.a.fire({title:e.length>0?"Update category":"Create category",html:'<input id="txt-label" class="swal2-input" placeholder="Category label..." value="'.concat(e,'" />'),showCancelButton:!0,confirmButtonText:e.length>0?"Update":"Create",showLoaderOnConfirm:!0,footer:t.length>0?"<span>You are creating a new category under <strong>".concat(t,"</strong></span>"):"",preConfirm:function(){var e=document.getElementById("txt-label").value;if(!e||0===e.length)return P.a.showValidationMessage("Please provide category label.")}}).then((function(e){if(e.value){var t=document.getElementById("txt-label").value;a(t)}}))},R=function(e){P.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((function(t){t.value&&e()}))},z=function(e){P.a.fire({position:"top-end",icon:"error",title:e,showConfirmButton:!0})},q=function(e){P.a.fire({position:"top-end",icon:"success",title:e,showConfirmButton:!1,timer:800})},W=function(){P.a.fire({title:"Loading...",text:"Please wait.",timerProgressBar:!0,showConfirmButton:!1,showCancelButton:!1,allowEscapeKey:!1,allowOutsideClick:!1,onBeforeOpen:function(){P.a.showLoading()}})};var J=function(e){var t=Object(n.useState)(new Date),a=Object(b.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),s=Object(b.a)(l,2),i=s[0],u=s[1],d=Object(n.useState)("month"),m=Object(b.a)(d,2),f=m[0],p=m[1];Object(n.useEffect)((function(){var t,a;console.log("called"),console.log("selected category : ",e.selectedCategory),"month"===f?(t=D()(new Date(o.getFullYear(),o.getMonth(),1)).format("YYYY-MM-DD"),a=D()(new Date(o.getFullYear(),o.getMonth()+1,0)).format("YYYY-MM-DD")):"week"===f?(t=D()(o).startOf("isoWeek").toDate(),a=D()(o).endOf("isoWeek").toDate()):"day"===f?(t=D()(o).toDate(),a=D()(o).toDate()):"agenda"===f&&(t=D()(o).startOf("day"),a=D()(o).endOf("day").add(1,"month")),F.getDuration(e.selectedCategory._id,t,a).then((function(e){if(e.error)z(e.error);else{P.a.close();var t=1e3*e.data.duration*60,a=D.a.duration(t,"milliseconds"),n=Math.floor(a.asHours()),r=Math.floor(a.asMinutes())-60*n;console.log("la dur\xe9e converti : "+n+" hours:"+r+" mins:"),u(n+" h "+r+" mn")}}))}),[e.selectedCategory]),D.a.locale("en",{week:{dow:1}});var g=Object(S.b)(D.a);return r.a.createElement("div",{style:{height:"90vh"}},r.a.createElement(T.a,{color:"warning",pill:!0},"Total duration : ",i),r.a.createElement(S.a,{popup:!0,selectable:!0,localizer:g,events:e.tasks,onSelectSlot:function(e){e.start,e.end},onSelectEvent:function(t){console.log("see task selected : ",t),e.viewTaskDetails(t)},onNavigate:function(t,a){var n,r;c(t),"month"===a?(n=D()(new Date(t.getFullYear(),t.getMonth(),1)).format("YYYY-MM-DD"),r=D()(new Date(t.getFullYear(),t.getMonth()+1,0)).format("YYYY-MM-DD")):"week"===a?(n=D()(t).startOf("isoWeek").toDate(),r=D()(t).endOf("isoWeek").toDate()):"day"===a?(console.log("clacaa : ",t),n=D()(t).toDate(),r=D()(t).toDate()):"agenda"===a&&(n=D()(t).startOf("day"),r=D()(t).endOf("day").add(1,"month")),console.log("first day : "+n+" last day : ",r),F.getDuration(e.selectedCategory._id,n,r).then((function(e){if(e.error)z(e.error);else{P.a.close();var t=1e3*e.data.duration*60,a=D.a.duration(t,"milliseconds"),n=Math.floor(a.asHours()),r=Math.floor(a.asMinutes())-60*n;console.log("DUREE ON NAVIGATE "+n+" hours:"+r+" mins:"),u(n+" h "+r+" mn")}}))},onView:function(t){var a,n;p(t),console.log("view selected : "+t),console.log("navigate"),"month"===t?(console.log("month"),a=D()(new Date(o.getFullYear(),o.getMonth(),1)).format("YYYY-MM-DD"),n=D()(new Date(o.getFullYear(),o.getMonth()+1,0)).format("YYYY-MM-DD")):"week"===t?(console.log("week"),a=D()(o).startOf("isoWeek").toDate(),n=D()(o).endOf("isoWeek").toDate(),console.log("start of week : "+a+" end of week :"+n)):"day"===t?(a=D()(o).toDate(),n=D()(o).toDate()):"agenda"===t&&(console.log("agenda"),a=D()(o).startOf("day"),n=D()(o).endOf("day").add(1,"month")),console.log("first day : "+a+" last day : ",n),F.getDuration(e.selectedCategory._id,a,n).then((function(e){if(e.error)z(e.error);else{P.a.close();var t=1e3*e.data.duration*60,a=D.a.duration(t,"milliseconds"),n=Math.floor(a.asHours()),r=Math.floor(a.asMinutes())-60*n;console.log(n+" hours:"+r+" mins:"),u(n+" h "+r+" mn")}}))}}))},V="https://mytracklog.moozistudio.com/api/",G=function e(){Object(A.a)(this,e)};G.getAll=function(){var e=Object(I.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={data:null,error:null},e.next=3,B.a.post("".concat(V,"/tasks/all"),{categoryId:t}).then((function(e){200===e.status&&(a.data=e.data)})).catch((function(e){a.error=e.response.data}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G.add=function(){var e=Object(I.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={data:null,error:null},e.next=3,B.a.post("".concat(V,"/tasks"),t).then((function(e){200===e.status&&(a.data=e.data)})).catch((function(e){a.error=e.response.data}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G.update=function(){var e=Object(I.a)(M.a.mark((function e(t,a){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={data:null,error:null},e.next=3,B.a.post("".concat(V,"/tasks/").concat(t),a).then((function(e){200===e.status&&(n.data=e.data)})).catch((function(e){n.error=e.response.data}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),G.get=function(){var e=Object(I.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={data:null,error:null},e.next=3,B.a.get("".concat(V,"/tasks/").concat(t)).then((function(e){200===e.status&&(a.data=e.data)})).catch((function(e){a.error=e.response.data}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G.delete=function(){var e=Object(I.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={data:null,error:null},e.next=3,B.a.delete("".concat(V,"/tasks/").concat(t)).then((function(e){200===e.status&&(a.data=e.data)})).catch((function(e){a.error=e.response.data}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var K=a(49);a(71);var Q=function(e){var t=Object(n.useState)(""),a=Object(b.a)(t,2),o=a[0],c=a[1];return Object(n.useEffect)((function(){F.getPath(e.category._id).then((function(e){e.error?z(e.error):(P.a.close(),c(e.data.path))}))}),[]),r.a.createElement(K.a,{visible:!0,onClose:function(){e.onClose()},closeOnEsc:!1,closeMaskOnClick:!1,customStyles:{width:"50%",height:"70%",overflow:"auto"}},r.a.createElement("div",{className:"container-fluid text-center"},r.a.createElement("h4",{className:"m-4"},"Category Details"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("p",null,r.a.createElement("strong",null,"Label: ")," ",e.category.label))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("p",null,r.a.createElement("strong",null,"Creation date: ")," ",D()(e.category.dateCreated).format("YYYY-MM-DD HH:mm")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("p",null,r.a.createElement("strong",null,"Last updated: ")," ",D()(e.category.dateUpdated).format("YYYY-MM-DD HH:mm")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("p",null,r.a.createElement("strong",null,"Path: ")," ",o)))))},X=a(213),Z=a(206);a(92),a(93);var $=function(e){console.log("props : ",e);var t=D()(),a=Object(n.useState)(""),o=Object(b.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(""),i=Object(b.a)(s,2),u=(i[0],i[1]),d=Object(n.useState)(""),m=Object(b.a)(d,2),f=m[0],p=m[1],g=Object(n.useState)(""),h=Object(b.a)(g,2),v=(h[0],h[1]),E=Object(n.useState)(t),y=Object(b.a)(E,2),O=(y[0],y[1]),j=Object(n.useState)(t),w=Object(b.a)(j,2),x=(w[0],w[1]),k=Object(n.useState)([]),C=Object(b.a)(k,2),N=C[0],S=C[1],T=function(){setTimeout((function(){window.location.reload()}),2e3)};Object(n.useEffect)((function(){F.getAllFlat("").then((function(t){t.error?z(t.error):(S(t.data),e.category&&(console.log(e.category),l(e.category.label.split("|")[0]),p(e.category.parentCategoryId)))}))}),[]);var Y=function(){var t=Object(I.a)(M.a.mark((function t(a){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("payload : ",{label:c,parentCategoryId:f}),a.preventDefault(),e.category){t.next=7;break}return t.next=5,F.add(c,f).then((function(t){t.error?z(t.error):(P.a.close(),q("Category added successfully!"),A(),e.onClose(),T())}));case 5:t.next=9;break;case 7:return t.next=9,F.update(e.category._id,c,f).then((function(t){console.log("result : ",t),t.error?z(t.error):(P.a.close(),q("Category updated successfully!"),A(),e.onClose(),T())}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){l(""),v(""),u(""),p("");var e=D()().format("YYYY-MM-DDThh:mm");O(e),x(e)};return r.a.createElement(K.a,{visible:!0,onClose:function(){A(),e.onClose()},closeOnEsc:!1,closeMaskOnClick:!1,customStyles:{width:"50%",height:"70%",overflow:"auto"}},r.a.createElement("div",{className:"container-fluid text-center"},r.a.createElement("form",{onSubmit:Y},r.a.createElement("h4",{className:"m-4"},e.category?"Update Category":"Create Category"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"txtLabel"},"Category label"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Label or Title...",required:"required",id:"txtLabel",value:c,onChange:function(e){return l(e.target.value)}})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"txtLabel"},"Category"),r.a.createElement(X.a,{value:f,onChange:p,emptyMessage:"Not found",placeholder:"Select category",search:!0,filterOptions:Z.a,options:N,style:{width:"100%"}})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("button",{type:"button",className:"btn btn-secondary m-1",onClick:e.onClose},"Close"),r.a.createElement("button",{type:"submit",className:"btn btn-primary m-1",onClick:Y},"Submit"),e.category&&r.a.createElement("button",{type:"button",className:"btn btn-danger m-1",onClick:function(t){R(Object(I.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.delete(e.category._id).then((function(t){t.error?z(t.error):(P.a.close(),q("Category deleted successfully!"),A(),e.onClose())}));case 2:case"end":return t.stop()}}),t)}))))}},"Delete"))))))},ee=a(57),te=a.n(ee);var ae=function(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(null),s=Object(b.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(null),f=Object(b.a)(m,2),p=(f[0],f[1]),g=Object(n.useState)(!1),h=Object(b.a)(g,2),v=h[0],E=h[1],y=Object(n.useState)(!1),O=Object(b.a)(y,2),j=O[0],w=O[1],x=Object(n.useState)(0),k=Object(b.a)(x,2),C=(k[0],k[1]),N=Object(n.useState)([]),S=Object(b.a)(N,2),T=(S[0],S[1]);Object(n.useEffect)((function(){A()}),[]);var Y=function(){setTimeout((function(){window.location.reload()}),2e3)},A=function(){setTimeout((function(){document.querySelector('script[src*="/js/script.js"]')&&document.querySelector('script[src*="/js/script.js"]').remove();var e=document.createElement("script");e.src="/js/script.js",e.type="text/javascript",document.getElementsByTagName("body")[0].appendChild(e)}),2e3)},_=function(){var e=Object(I.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.getAll(i._id).then((function(e){if(e.error)z(e.error);else{C(e.data.duration);for(var t=Array.from(e.data.tasks),a=te.a.groupBy(e.data.tasks,(function(e){return D()(e.start).startOf("day").format()})),n=0,r=Object.entries(a);n<r.length;n++){var o=Object(b.a)(r[n],2),c=o[0],l=o[1];t.push({_id:l._id,categoryId:l.categoryId,title:"Total ".concat(V(l.reduce((function(e,t){return e+t.duration}),0))),start:D()(c).toDate(),end:D()(c).toDate()})}t=t.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{start:D()(e.start).toDate(),end:D()(e.end).toDate()})})),T(t)}}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e,t){e.preventDefault(),U("",t.label,function(){var e=Object(I.a)(M.a.mark((function e(a){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return W(),e.next=3,F.add(a,t._id).then((function(e){e.error?z(e.error):(P.a.close(),q("Category added successfully!"),Y())}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},L=function(e,t){e.preventDefault(),u(t),c(!0)},H=function(e,t){e.preventDefault(),u(t),w(!0)},R=function(e,t){var a;a=Object(I.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.delete(t._id).then((function(e){e.error?z(e.error):(P.a.close(),q("Category deleted successfully!"),Y())}));case 2:case"end":return e.stop()}}),e)}))),P.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",footer:"<strong>Warning!</strong>&nbsp;This Category, all its Sub-Categories and the Tasks in these categories will be deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then((function(e){e.value&&a()}))},J=function(t,a){console.log("select one category"),e.setSelectedCategory(a)},V=function(e){return D.a.utc(D.a.duration(60*e,"seconds").asMilliseconds()).format("HH:mm")};return r.a.createElement("div",null,v&&r.a.createElement($,{task:i,onClose:function(){u(null),E(!1)},reloadCategorys:_}),j&&r.a.createElement($,{category:i,onClose:function(){p(null),w(!1)},reloadCategorys:_}),i&&o&&r.a.createElement(Q,{category:i,onClose:function(){u(null),c(!1)}}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("a",{href:"#",onClick:function(e){return function(e){e.preventDefault(),U("","",(function(e){W(),F.add(e,"").then((function(e){e.error?z(e.error):(P.a.close(),q("Category added successfully!"),Y())}))}))}(e)},className:"btn-purple"},r.a.createElement("i",{className:"fa fa-plus-circle",style:{fontSize:"20px",marginRight:"8px"}}),"Root category")),r.a.createElement("div",{className:"col text-right",style:{marginRight:"108px"}},r.a.createElement("a",{href:"#",onClick:function(e){return function(e){e.preventDefault(),E(!0)}(e)},className:"btn-purple"},r.a.createElement("i",{className:"fa fa-plus-circle",style:{fontSize:"20px",marginRight:"8px"}}),"Category"))),r.a.createElement("div",{className:"row mt-10"},r.a.createElement("div",{className:"col"},r.a.createElement("ul",{id:"treeview",className:"jslists"},function e(t){return t.map((function(t){return t.children.length>0?r.a.createElement("li",{key:t._id},r.a.createElement("a",{onClick:function(e){return J(0,t)}},r.a.createElement("i",{className:"far fa-folder"}),t.label),r.a.createElement("i",{className:"fa fa-eye",onClick:function(e){return L(e,t)},title:"View details"}),r.a.createElement("i",{className:"fa fa-plus",onClick:function(e){return B(e,t)},title:"Add sub category"}),r.a.createElement("i",{className:"fa fa-pencil-alt",onClick:function(e){return H(e,t)},title:"Edit this category"}),r.a.createElement("i",{className:"fa fa-trash",onClick:function(e){return R(0,t)},title:"Delete this category"}),r.a.createElement("ul",null,e(t.children))):r.a.createElement("li",{key:t._id},r.a.createElement("a",{onClick:function(e){return J(0,t)}},t.label),r.a.createElement("i",{className:"fa fa-eye",onClick:function(e){return L(e,t)},title:"View details"}),r.a.createElement("i",{className:"fa fa-plus",onClick:function(e){return B(e,t)},title:"Add sub category"}),r.a.createElement("i",{className:"fa fa-pencil-alt",onClick:function(e){return H(e,t)},title:"Edit this category"}),r.a.createElement("i",{className:"fa fa-trash",onClick:function(e){return R(0,t)},title:"Delete this category"}))}))}(e.data)))))};var ne=function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-center"},r.a.createElement("p",{className:"not-selected"},r.a.createElement("i",{className:"fa fa-exclamation m-3"}),"Category not selected"),r.a.createElement("p",{className:"not-selected-hint"},r.a.createElement("i",{className:"fa fa-quote-left m-2"}),"Please select a category to load its Tasks Calendar.",r.a.createElement("i",{className:"fa fa-quote-right m-2"})))))};var re=function(e){var t=D()(),a=Object(n.useState)(""),o=Object(b.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(""),i=Object(b.a)(s,2),u=i[0],d=i[1],m=Object(n.useState)(""),f=Object(b.a)(m,2),p=f[0],g=f[1],h=Object(n.useState)(t),v=Object(b.a)(h,2),E=v[0],y=v[1],O=Object(n.useState)(t),j=Object(b.a)(O,2),w=j[0],x=j[1],k=Object(n.useState)([]),C=Object(b.a)(k,2),N=C[0],S=C[1],T=function(e){var t=1e3*e*60,a=D.a.duration(t,"milliseconds"),n=Math.floor(a.asHours()),r=Math.floor(a.asMinutes())-60*n;return console.log("DUREE ON NAVIGATE "+n+" hours:"+r+" mins:"),n+" h "+r+" mn"};Object(n.useEffect)((function(){F.getAllFlat("").then((function(t){t.error?z(t.error):(S(t.data),e.task&&(console.log(e.task),l(e.task.title.split("|")[0]),d(e.task.categoryId),g(e.task.description),y(D()(e.task.start).format("YYYY-MM-DDTHH:mm")),x(D()(e.task.end).format("YYYY-MM-DDTHH:mm"))))}))}),[]);var Y=function(){var t=Object(I.a)(M.a.mark((function t(a){var n,r,o;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!((n=D.a.duration(D()(w).diff(D()(E))).asMinutes())<=0)){t.next=5;break}return l="Task duration is not valid.",P.a.fire({position:"top-end",icon:"info",title:l,showConfirmButton:!0}),t.abrupt("return");case 5:if(r=new Date(E).toISOString(),o=new Date(w).toISOString(),e.task){t.next=12;break}return t.next=10,G.add({label:c,description:p,startedAt:r,finishedAt:o,duration:n,categoryId:u}).then((function(t){t.error?z(t.error):(P.a.close(),q("Task added successfully!"),A(),e.reloadTasks(),e.onClose())}));case 10:t.next=14;break;case 12:return t.next=14,G.update(e.task._id,{label:c,description:p,startedAt:r,finishedAt:o,duration:n,categoryId:u}).then((function(t){t.error?z(t.error):(P.a.close(),q("Task updated successfully!"),A(),e.reloadTasks(),e.onClose())}));case 14:case"end":return t.stop()}var l}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){l(""),g(""),d("");var e=D()().format("YYYY-MM-DDThh:mm");y(e),x(e)};return r.a.createElement(K.a,{visible:!0,onClose:function(){A(),e.onClose()},closeOnEsc:!1,closeMaskOnClick:!1,customStyles:{width:"50%",height:"70%",overflow:"auto"}},r.a.createElement("div",{className:"container-fluid text-center"},r.a.createElement("form",{onSubmit:Y},r.a.createElement("h4",{className:"m-4"},e.task?"Update Task":"Create Task"),r.a.createElement("input",{type:"hidden",id:"timezone",name:"timezone",value:"+02:00"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"txtLabel"},"Task label"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Label or Title...",required:"required",id:"txtLabel",value:c,onChange:function(e){return l(e.target.value)}})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"txtLabel"},"Category"),r.a.createElement(X.a,{value:u,onChange:d,emptyMessage:"Not found",placeholder:"Select category",search:!0,filterOptions:Z.a,options:N,style:{width:"100%"}})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"txtDescription"},"Description"),r.a.createElement("textarea",{className:"form-control",placeholder:"Description...",required:"required",id:"txtDescription",value:p,onChange:function(e){return g(e.target.value)}})))),e.task&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("label",null,r.a.createElement("i",null,"Task duration is ",r.a.createElement("strong",null,T(D.a.duration(D()(e.task.end).diff(D()(e.task.start))).asMinutes())))))),!e.task&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("label",null,r.a.createElement("i",null,"Task duration is ",r.a.createElement("strong",null,T(D.a.duration(D()(w).diff(D()(E))).asMinutes())))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col text-left"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"txtStart"},"Starting at"),console.log("staaaaaaaaaaarted at : ",E),r.a.createElement("input",{type:"datetime-local",className:"form-control",value:E,onChange:function(e){console.log("choosen dateHour :",e.target.value),y(e.target.value)}}))),r.a.createElement("div",{className:"col text-left"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"txtStart"},"Finished at"),r.a.createElement("input",{type:"datetime-local",className:"form-control",value:w,onChange:function(e){return x(e.target.value)}})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("button",{type:"button",className:"btn btn-secondary m-1",onClick:e.onClose},"Close"),r.a.createElement("button",{type:"submit",className:"btn btn-primary m-1",onClick:Y},"Submit"),e.task&&r.a.createElement("button",{type:"button",className:"btn btn-danger m-1",onClick:function(t){R(Object(I.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G.delete(e.task._id).then((function(t){t.error?z(t.error):(P.a.close(),q("Task deleted successfully!"),A(),e.reloadTasks(),e.onClose())}));case 2:case"end":return t.stop()}}),t)}))))}},"Delete"))))))},oe=a(211),ce=a(208),le=a(214),se=a(207),ie=a(111),ue=a.n(ie);console.log("VUE APP URL : ","https://mytracklog.moozistudio.com/api/");var de=B.a.create({baseURL:"https://mytracklog.moozistudio.com/api/"});de.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).token)),e}));var me=function(e){return de.post("/user/signin",e)},fe=function(e){return de.post("/user/signup",e)},pe=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:e.spacing(2)},root:{"& .MuiTextField-root":{margin:e.spacing(1)}},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},googleButton:{marginBottom:e.spacing(2)}}})),ge=a(212),be=a(209),he=a(210),ve=a(109),Ee=a.n(ve),ye=a(110),Oe=a.n(ye),je=function(e){var t=e.name,a=e.handleChange,n=e.label,o=e.half,c=e.autoFocus,l=e.type,s=e.handleShowPassword;return r.a.createElement(se.a,{item:!0,xs:12,sm:o?6:12},r.a.createElement(ge.a,{name:t,onChange:a,variant:"outlined",required:!0,fullWidth:!0,label:n,autoFocus:c,type:l,InputProps:"password"===t?{endAdornment:r.a.createElement(be.a,{position:"end"},r.a.createElement(he.a,{onClick:s},"password"===l?r.a.createElement(Ee.a,null):r.a.createElement(Oe.a,null)))}:null}))},we={firstname:"",lastname:"",email:"",password:"",confirmPassword:""},xe=function(){var e=Object(n.useState)(we),t=Object(b.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),s=Object(b.a)(c,2),i=s[0],u=(s[1],Object(l.b)()),m=Object(g.g)(),f=pe();Object(n.useEffect)((function(){localStorage.getItem("profile")&&m.push("/")}),[]);var p=Object(n.useState)(!1),h=Object(b.a)(p,2),v=h[0],O=h[1],w=function(e){return o(Object(d.a)(Object(d.a)({},a),{},Object(j.a)({},e.target.name,e.target.value)))};return r.a.createElement(oe.a,{component:"main",maxWidth:"xs"},r.a.createElement(ce.a,{className:f.paper,elevation:6},r.a.createElement(le.a,{className:f.avatar},r.a.createElement(ue.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},i?"Sign up":"Sign in"),r.a.createElement("form",{className:f.form,onSubmit:function(e){var t,n;e.preventDefault(),console.log("form : ",a),u(i?(t=a,n=m,function(){var e=Object(I.a)(M.a.mark((function e(a){var r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe(t);case 3:r=e.sent,o=r.data,a({type:"AUTH",data:o}),n.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()):function(e,t){return function(){var a=Object(I.a)(M.a.mark((function a(n){var r,o;return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,me(e);case 3:r=a.sent,o=r.data,console.log("test :: ",o),n({type:"AUTH",data:o}),t.push("/"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(a,m))}},r.a.createElement(se.a,{container:!0,spacing:2},i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(je,{name:"firstname",label:"First Name",handleChange:w,autoFocus:!0,half:!0}),r.a.createElement(je,{name:"lastname",label:"Last Name",handleChange:w,half:!0})),r.a.createElement(je,{name:"email",label:"Email Address",handleChange:w,type:"email"}),r.a.createElement(je,{name:"password",label:"Password",handleChange:w,type:v?"text":"password",handleShowPassword:function(){return O(!v)}}),i&&r.a.createElement(je,{name:"confirmPassword",label:"Repeat Password",handleChange:w,type:"password"})),r.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:f.submit},i?"Sign Up":"Sign In"),r.a.createElement(se.a,{container:!0,justify:"flex-end"},r.a.createElement(se.a,{item:!0})))))};a(94),a(157);var ke=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)([]),l=Object(b.a)(c,2),s=l[0],i=l[1],u=Object(n.useState)(null),m=Object(b.a)(u,2),f=m[0],p=m[1],g=Object(n.useState)(!1),h=Object(b.a)(g,2),v=h[0],E=h[1],y=Object(n.useState)(null),O=Object(b.a)(y,2),j=O[0],w=O[1];Object(n.useEffect)((function(){x()}),[]),Object(n.useEffect)((function(){f&&k()}),[f]);var x=function(){var e=Object(I.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getAll("").then((function(e){e.error?z(e.error):o(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(I.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.getAll(f._id).then((function(e){if(e.error)z(e.error);else{for(var t=1e3*e.data.duration,a=D.a.duration(t,"milliseconds"),n=Math.floor(a.asHours()),r=(Math.floor(a.asMinutes()),Array.from(e.data.tasks)),o=te.a.groupBy(e.data.tasks,(function(e){return D()(e.start).startOf("day").format()})),c=0,l=Object.entries(o);c<l.length;c++){var s=Object(b.a)(l[c],2),u=s[0],m=s[1];r.push({_id:m._id,categoryId:m.categoryId,title:"Total ".concat(N(m.reduce((function(e,t){return e+t.duration}),0))),start:D()(u).toDate(),end:D()(u).toDate()})}r=r.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{start:D()(e.start).toDate(),end:D()(e.end).toDate()})})),i(r)}}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e){return D.a.utc(D.a.duration(60*e,"seconds").asMilliseconds()).format("HH:mm")};return r.a.createElement("div",null,r.a.createElement(C,null),v&&r.a.createElement(re,{task:j,onClose:function(){w(null),E(!1)},reloadTasks:k}),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row mt-10",style:{height:"90vh"}},r.a.createElement("div",{className:"col-3"},r.a.createElement(ae,{data:a,setSelectedCategory:p})),r.a.createElement("div",{className:"col-9"},f&&r.a.createElement("div",{className:"row mb-10"},r.a.createElement("div",{className:"col"},r.a.createElement("strong",null,"Selected category: "),f.label,"\xa0\xa0"),r.a.createElement("div",{className:"col text-right"},r.a.createElement("a",{href:"#",onClick:function(e){return function(e){e.preventDefault(),E(!0)}(e)},className:"btn-purple"},r.a.createElement("i",{className:"fa fa-plus-circle",style:{fontSize:"20px",marginRight:"8px"}}),"Create new Task"))),f&&r.a.createElement(J,{selectedCategory:f,tasks:s,viewTaskDetails:function(e){w(e),E(!0)}})||r.a.createElement(ne,null)))))};var Ce=function(){return JSON.parse(localStorage.getItem("profile")),Object(n.useEffect)((function(){}),[]),r.a.createElement(p.a,null,r.a.createElement(oe.a,{maxWidth:"xl"},r.a.createElement(g.d,null,r.a.createElement(g.b,{path:"/",exact:!0,render:function(){return localStorage.getItem("profile")?(console.log("yes"),r.a.createElement(ke,null)):(console.log("no"),r.a.createElement(g.a,{to:"/login"}))}}),r.a.createElement(g.b,{path:"/tasks",exact:!0,component:ke}),r.a.createElement(g.b,{path:"/tasks/search",exact:!0,component:ke}),r.a.createElement(g.b,{path:"/login",exact:!0,component:xe}))))},Ne=(a(158),Object(s.d)(f,{},Object(s.c)(Object(s.a)(i.a))));c.a.render(r.a.createElement(l.a,{store:Ne},r.a.createElement(Ce,null)),document.getElementById("root"))},96:function(e){e.exports=JSON.parse('{"api":"http://localhost:4000","appUrl":"http://localhost:3000","appTitle":"Tracklog"}')}},[[124,1,2]]]);
//# sourceMappingURL=main.3b641c4d.chunk.js.map